<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0f0f13">
    <title>Sana Ã–zel â¤ï¸</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Poppins:wght@300;400;600&display=swap"
        rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- AOS Library for scroll animations -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/games.css">

    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- PWA / iOS Web App Settings -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="assets/img/icon.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Home">
</head>

<body>

    <!-- 1. GÄ°RÄ°Å EKRANI (Butonlu) -->
    <div id="login-screen">
        <div class="login-content">
            <button id="enter-btn" class="key-btn">
                <i class="fas fa-key"></i> Eve Gir
            </button>
        </div>
    </div>

    <!-- 1.5. PROFÄ°L SEÃ‡Ä°M EKRANI (YENÄ°) -->
    <div id="profile-selection-screen" class="hidden">
        <div class="profile-content">
            <h2 class="profile-title" data-aos="fade-down">Hangi Karaktersin?</h2>
            <div class="profile-container">
                <!-- TavÅŸan KartÄ± -->
                <div class="profile-card" id="select-rabbit">
                    <div class="profile-emoji">ğŸ°</div>
                    <h3>TavÅŸan</h3>
                </div>
                <!-- Tilki KartÄ± -->
                <div class="profile-card" id="select-fox">
                    <div class="profile-emoji">ğŸ¦Š</div>
                    <h3>Tilki</h3>
                </div>
            </div>
        </div>
    </div>

    <!-- ANA Ä°Ã‡ERÄ°K (Oda SeÃ§imi) -->
    <main id="main-content" class="hidden">
        <div id="room-selection">
            <h2 class="room-title" data-aos="fade-down">Nereye Gitmek Ä°stersin?</h2>
            <div class="rooms-container">
                <!-- BuluÅŸma OdasÄ± KartÄ± (YENÄ°) -->
                <div class="room-card" id="btn-meeting" data-aos="fade-up">
                    <div class="room-img" style="background-image: url('assets/img/meeting_room.png');"></div>
                    <div class="room-info">
                        <h3>BuluÅŸma OdasÄ±</h3>
                        <p>ÅÃ¶mine baÅŸÄ±nda sohbet...</p>
                    </div>
                </div>

                <!-- Åiir OdasÄ± KartÄ± -->
                <div class="room-card" id="btn-poetry" data-aos="fade-right">
                    <div class="room-img" style="background-image: url('assets/img/poetry_room.png');"></div>
                    <div class="room-info">
                        <h3>Åiir OdasÄ±</h3>
                        <p>Kelimelerin bÃ¼yÃ¼lÃ¼ dÃ¼nyasÄ±...</p>
                    </div>
                </div>

                <!-- AnÄ± OdasÄ± KartÄ± -->
                <div class="room-card" id="btn-memory" data-aos="fade-left">
                    <div class="room-img" style="background-image: url('assets/img/memory_room.png');"></div>
                    <div class="room-info">
                        <h3>AnÄ± OdasÄ±</h3>
                        <p>GeÃ§miÅŸin tatlÄ± izleri...</p>
                    </div>
                </div>

                <!-- Oyun OdasÄ± KartÄ± (YENÄ°) -->
                <div class="room-card" id="btn-game" data-aos="fade-up">
                    <div class="room-img" style="background-image: url('assets/img/game_room.png');"></div>
                    <div class="room-info">
                        <h3>ğŸ® Oyun OdasÄ±</h3>
                        <p>EÄŸlence zamanÄ±!</p>
                    </div>
                </div>

                <!-- Ã‡alÄ±ÅŸma OdasÄ± KartÄ± (YENÄ°) -->
                <div class="room-card" id="btn-working" data-aos="fade-up">
                    <div class="room-img" style="background-image: url('assets/img/working_room.png');"></div>
                    <div class="room-info">
                        <h3>ğŸ’¼ Ã‡alÄ±ÅŸma OdasÄ±</h3>
                        <p>Ä°ÅŸler gÃ¼Ã§ler...</p>
                    </div>
                </div>
            </div>


        </div>

        <!-- ODA Ä°Ã‡ERÄ°KLERÄ° -->
        <section id="poetry-room" class="room-section hidden">
            <!-- Arka Plan -->
            <div class="overlay"></div>

            <button class="back-btn" onclick="goBackToHall()">
                <i class="fas fa-arrow-left"></i> Hol'e DÃ¶n
            </button>

            <!-- UÃ§uÅŸan Åiir Ä°simleri AlanÄ± -->
            <div id="floating-area">
                <!-- JS ile buraya ÅŸiir baÅŸlÄ±klarÄ± eklenecek -->
            </div>

            <!-- Åiir Okuma ModalÄ± (ParÅŸomen) - BaÅŸlangÄ±Ã§ta Gizli -->
            <div id="poem-modal" class="hidden overlay-modal">
                <button class="close-modal-btn" onclick="closePoemModal()">
                    <i class="fas fa-times"></i>
                </button>
                <div class="parchment-wrapper">
                    <div class="parchment">
                        <h2 class="poem-title" id="modal-poem-title">BaÅŸlÄ±k</h2>
                        <div class="poem-body" id="modal-poem-body">
                            <!-- Åiir iÃ§eriÄŸi buraya gelecek -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Åiir Ekleme Butonu (Sol Alt) -->
            <button id="add-poem-fab" onclick="toggleAddPoemForm()">
                <i class="fas fa-feather-alt"></i> Åiir Ekle
            </button>

            <!-- Åiir Ekleme Formu -->
            <div id="new-poem-form" class="hidden overlay-modal">
                <div class="form-card">
                    <h3>Yeni Åiir Yaz ğŸ–‹ï¸</h3>
                    <input type="text" id="new-poem-title" placeholder="Åiir BaÅŸlÄ±ÄŸÄ±...">
                    <textarea id="new-poem-body" placeholder="Ä°Ã§indeki dÃ¶k..."></textarea>
                    <div class="form-buttons">
                        <button onclick="saveNewPoem()" class="save-btn">Kaydet</button>
                        <button onclick="toggleAddPoemForm()" class="cancel-btn">Ä°ptal</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="memory-room" class="room-section hidden">
            <!-- AnÄ± OdasÄ± Arka PlanÄ± -->
            <div class="overlay"></div>

            <button class="back-btn" onclick="goBackToHall()">
                <i class="fas fa-arrow-left"></i> Hol'e DÃ¶n
            </button>

            <h1 class="memory-title" data-aos="fade-down">AnÄ±larÄ±mÄ±z</h1>

            <!-- 3x3 Resim Ã‡erÃ§evesi Galeri -->
            <div class="frame-container" data-aos="zoom-in">
                <div class="grid-3x3">
                    <!-- 9 Adet Slot - JS ile kontrol edilecek -->
                    <div class="frame-slot" id="slot-1">
                        <img id="img-1"
                            src="https://images.unsplash.com/photo-1516961642265-531546e84af2?q=80&w=1000&auto=format&fit=crop"
                            alt="Memory">
                    </div>
                    <div class="frame-slot" id="slot-2">
                        <img id="img-2"
                            src="https://images.unsplash.com/photo-1529619768328-e37af76c6fe5?q=80&w=1000&auto=format&fit=crop"
                            alt="Memory">
                    </div>
                    <div class="frame-slot" id="slot-3">
                        <div class="empty-placeholder"><i class="fas fa-image"></i><br>BoÅŸ</div>
                        <img id="img-3" class="hidden" src="" alt="Memory">
                    </div>
                    <div class="frame-slot" id="slot-4">
                        <div class="empty-placeholder"><i class="fas fa-image"></i><br>BoÅŸ</div>
                        <img id="img-4" class="hidden" src="" alt="Memory">
                    </div>
                    <div class="frame-slot" id="slot-5">
                        <div class="empty-placeholder"><i class="fas fa-image"></i><br>BoÅŸ</div>
                        <img id="img-5" class="hidden" src="" alt="Memory">
                    </div>
                    <div class="frame-slot" id="slot-6">
                        <div class="empty-placeholder"><i class="fas fa-image"></i><br>BoÅŸ</div>
                        <img id="img-6" class="hidden" src="" alt="Memory">
                    </div>
                    <div class="frame-slot" id="slot-7">
                        <div class="empty-placeholder"><i class="fas fa-image"></i><br>BoÅŸ</div>
                        <img id="img-7" class="hidden" src="" alt="Memory">
                    </div>
                    <div class="frame-slot" id="slot-8">
                        <div class="empty-placeholder"><i class="fas fa-image"></i><br>BoÅŸ</div>
                        <img id="img-8" class="hidden" src="" alt="Memory">
                    </div>
                    <div class="frame-slot" id="slot-9">
                        <div class="empty-placeholder"><i class="fas fa-image"></i><br>BoÅŸ</div>
                        <img id="img-9" class="hidden" src="" alt="Memory">
                    </div>
                </div>
            </div>

            <!-- Yeni AnÄ± Ekleme Butonu (FAB) -->
            <button id="add-memory-btn" onclick="openAddMemoryMenu()">
                <i class="fas fa-plus"></i> AnÄ± Ekle
            </button>

            <!-- Lightbox (Resim BÃ¼yÃ¼tme) -->
            <div id="lightbox-modal" class="hidden" onclick="closeLightbox(event)">
                <button class="lightbox-close" onclick="closeLightbox(event)"><i class="fas fa-times"></i></button>
                <button class="lightbox-nav prev" onclick="changeLightboxImage(-1, event)"><i
                        class="fas fa-chevron-left"></i></button>

                <img id="lightbox-img" src="" alt="Full Memory">

                <button class="lightbox-nav next" onclick="changeLightboxImage(1, event)"><i
                        class="fas fa-chevron-right"></i></button>
            </div>

            <!-- Gizli Dosya YÃ¼kleme Inputu -->
            <input type="file" id="image-upload" accept="image/*" style="display: none;">
        </section>

        <!-- BULUÅMA ODASI (YENÄ°) -->
        <section id="meeting-room" class="room-section hidden">
            <div class="overlay"></div>

            <button class="back-btn" onclick="goBackToHall()">
                <i class="fas fa-arrow-left"></i> Hol'e DÃ¶n
            </button>

            <!-- Sohbet AlanÄ± -->
            <div class="chat-container">
                <div class="chat-header">
                    <h2>ğŸ”¥ ÅÃ¶mine BaÅŸÄ± Sohbeti</h2>
                </div>
                <div class="chat-messages" id="chat-messages">
                    <!-- Mesajlar buraya gelecek -->
                    <div class="message system-message">
                        BuluÅŸma odasÄ±na hoÅŸ geldin... ÅÃ¶mine Ã§ok gÃ¼zel yanÄ±yor. ğŸ”¥
                    </div>
                </div>
                <div class="chat-input-area">
                    <input type="text" id="chat-input" placeholder="Bir ÅŸeyler sÃ¶yle...">
                    <button id="send-btn"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
            </div>
        </section>

        <!-- OYUN ODASI (YENÄ°) -->
        <section id="game-room" class="room-section hidden">
            <div class="overlay"></div>

            <button class="back-btn" onclick="goBackToHall()">
                <i class="fas fa-arrow-left"></i> Hol'e DÃ¶n
            </button>

            <div class="games-menu">
                <h2 class="games-title">ğŸ® Hangi Oyunu Oynamak Ä°stersin?</h2>
                <div class="game-buttons">
                    <button class="game-select-btn" id="btn-wheel-game">
                        <i class="fas fa-circle-notch"></i> Kader Ã‡arkÄ±
                    </button>
                    <button class="game-select-btn" id="btn-words-game">
                        <i class="fas fa-times-circle"></i> Yasak Kelimeler
                    </button>
                    <button class="game-select-btn" id="btn-quiz-game">
                        <i class="fas fa-heart"></i> AÅŸk Testi
                    </button>
                    <button class="game-select-btn" id="btn-trivia-game">
                        <i class="fas fa-brain"></i> Bilgi YarÄ±ÅŸmasÄ±
                    </button>
                </div>

                <!-- SON OYNANAN OYUNLAR (PERSISTENCE CHECK) -->
                <div id="recent-scores"
                    style="margin-top: 50px; color: white; background: rgba(0,0,0,0.3); padding: 20px; border-radius: 15px; width: 90%; max-width: 500px;">
                    <!-- JS ile dolacak -->
                </div>
            </div>

            <!-- KADER Ã‡ARKI OYUNU -->
            <div class="game-container hidden" id="wheel-game-container">
                <button class="game-back-btn" id="wheel-back-btn">â—€ Geri</button>
                <h2 class="game-title">ğŸ¡ Kader Ã‡arkÄ±</h2>
                <div class="wheel-wrapper">
                    <canvas id="wheelCanvas" width="500" height="500"></canvas>
                    <div class="wheel-pointer"></div>
                </div>
                <button class="spin-btn" id="spin-btn">Ã‡EVÄ°R</button>
                <div class="wheel-result hidden" id="wheel-result"></div>
            </div>

            <!-- YASAK KELÄ°MELER OYUNU -->
            <div class="game-container hidden" id="words-game-container">
                <button class="game-back-btn" id="words-back-btn">â—€ Geri</button>
                <h2 class="game-title">ğŸš« Yasak Kelimeler</h2>
                <p class="words-instruction">Balonlara tÄ±kla ama yasaklÄ± olanÄ± patlatma!</p>
                <div class="words-playground" id="words-playground">
                    <!-- Kelimeler buraya JS ile gelecek -->
                </div>
                <div class="words-result hidden" id="words-result"></div>
            </div>

            <!-- AÅK TESTÄ° OYUNU -->
            <div class="game-container hidden" id="quiz-game-container">
                <button class="game-back-btn" id="quiz-back-btn">â—€ Geri</button>
                <h2 class="game-title">â¤ï¸ AÅŸk Testi</h2>
                <div class="quiz-container" id="quiz-container">
                    <!-- Soru buraya gelecek -->
                </div>
            </div>

            <!-- BÄ°LGÄ° YARIÅMASI OYUNU (YENÄ°) -->
            <div class="game-container hidden" id="trivia-game-container">
                <button class="game-back-btn" id="trivia-back-btn">â—€ Geri</button>
                <h2 class="game-title">ğŸ§  Bilgi YarÄ±ÅŸmasÄ±</h2>
                <div class="quiz-container" id="trivia-container">
                    <!-- JS ile dolacak -->
                </div>
            </div>
            </div>
        </section>

        <!-- Ã‡ALIÅMA ODASI (YENÄ°) -->
        <section id="working-room" class="room-section hidden">
            <div class="overlay"></div>

            <button class="back-btn" onclick="goBackToHall()">
                <i class="fas fa-arrow-left"></i> Hol'e DÃ¶n
            </button>

            <div class="working-content">
                <i class="fas fa-hard-hat" style="font-size: 5rem; color: #ffd700; margin-bottom: 20px;"></i>
                <h1>Ã‡ok YakÄ±nda</h1>
                <p>Burada harika iÅŸler baÅŸarÄ±lacak...</p>
            </div>
        </section>
    </main>

    <!-- MÃœZÄ°K OYNATICI -->
    <div id="music-container" class="hidden">
        <!-- MÃ¼zik Kontrol Butonu -->
        <button id="music-btn">
            <i class="fas fa-music"></i>
        </button>

        <!-- MÃ¼zik Paneli -->
        <div id="music-panel" class="hidden">
            <h4>MÃ¼zik Listesi</h4>
            <ul id="playlist">
                <li data-src="assets/music/track1.mp3">ğŸµ Bir Beyaz Orkide</li>
                <li data-src="assets/music/track2.mp3">ğŸ¸ DedublÃ¼man - Sen Bilmezsin</li>
                <li data-src="assets/music/track3.mp3">ğŸ¤ Sen Beni UnutamazsÄ±n</li>
                <li data-src="assets/music/track4.mp3">ğŸ’” Senden GeÃ§emiyorum</li>
            </ul>
            <div class="controls">
                <button id="prev-btn"><i class="fas fa-backward"></i></button>
                <button id="play-pause-btn"><i class="fas fa-play"></i></button>
                <button id="next-btn"><i class="fas fa-forward"></i></button>
            </div>
            <!-- Ses KontrolÃ¼ -->
            <div class="volume-control">
                <i class="fas fa-volume-down"></i>
                <input type="range" id="volume-slider" min="0" max="1" step="0.1" value="0.5">
                <i class="fas fa-volume-up"></i>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="js/telegram-notifications.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-client.js"></script>
    <script src="js/main.js?v=2"></script>
    <script src="js/quiz-game.js?v=2"></script>
    <script src="js/trivia-game.js?v=2"></script> <!-- YENÄ° -->
    <script src="js/games.js?v=2"></script>
</body>

</html>