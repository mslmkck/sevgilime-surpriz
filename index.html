<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0f0f13">
    <title>Sana √ñzel ‚ù§Ô∏è</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Poppins:wght@300;400;600&display=swap"
        rel="stylesheet">
    <!-- Preconnect for Image CDN -->
    <link rel="preconnect" href="https://images.unsplash.com">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- AOS Library for scroll animations -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css?v=3">
    <link rel="stylesheet" href="css/games.css?v=3">
    <link rel="stylesheet" href="css/extra.css?v=3">

    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- PWA / iOS Web App Settings -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="assets/img/icon.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Home">
</head>

<body>

    <!-- 1. Gƒ∞Rƒ∞≈û EKRANI (Butonlu) -->
    <div id="login-screen">
        <div class="login-content">
            <button id="enter-btn" class="key-btn">
                <i class="fas fa-key"></i> Eve Gir
            </button>
        </div>
    </div>

    <!-- 1.5. PROFƒ∞L SE√áƒ∞M EKRANI (YENƒ∞) -->
    <div id="profile-selection-screen" class="hidden">
        <div class="profile-content">
            <h2 class="profile-title" data-aos="fade-down">Hangi Karaktersin?</h2>
            <div class="profile-container">
                <!-- Tav≈üan Kartƒ± -->
                <div class="profile-card" id="select-rabbit">
                    <div class="profile-emoji">üê∞</div>
                    <h3>Tav≈üan</h3>
                </div>
                <!-- Tilki Kartƒ± -->
                <div class="profile-card" id="select-fox">
                    <div class="profile-emoji">ü¶ä</div>
                    <h3>Tilki</h3>
                </div>
            </div>
        </div>
    </div>

    <!-- ANA ƒ∞√áERƒ∞K (Oda Se√ßimi) -->
    <main id="main-content" class="hidden">
        <div id="room-selection">
            <h2 class="room-title" data-aos="fade-down">Nereye Gitmek ƒ∞stersin?</h2>
            <div class="rooms-container">
                <div class="room-card" id="btn-meeting" data-aos="fade-up">
                    <div class="room-img" style="background-image: url('assets/img/meeting_room.png');" loading="lazy">
                    </div>
                    <div class="room-info">
                        <h3>Bulu≈üma Odasƒ±</h3>
                    </div>
                </div>

                <!-- ≈ûiir Odasƒ± Kartƒ± -->
                <div class="room-card" id="btn-poetry" data-aos="fade-right">
                    <div class="room-img" style="background-image: url('assets/img/poetry_room.png');"></div>
                    <div class="room-info">
                        <h3>≈ûiir Odasƒ±</h3>
                    </div>
                </div>

                <!-- Anƒ± Odasƒ± Kartƒ± -->
                <div class="room-card" id="btn-memory" data-aos="fade-left">
                    <div class="room-img" style="background-image: url('assets/img/memory_room.png');"></div>
                    <div class="room-info">
                        <h3>Anƒ± Odasƒ±</h3>
                    </div>
                </div>

                <!-- Oyun Odasƒ± Kartƒ± (YENƒ∞) -->
                <div class="room-card" id="btn-game" data-aos="fade-up">
                    <div class="room-img" style="background-image: url('assets/img/game_room.png');"></div>
                    <div class="room-info">
                        <h3>üéÆ Oyun Odasƒ±</h3>
                    </div>
                </div>

                <!-- √áalƒ±≈üma Odasƒ± Kartƒ± (YENƒ∞) -->
                <div class="room-card" id="btn-working" data-aos="fade-up">
                    <div class="room-img" style="background-image: url('assets/img/working_room.png');"></div>
                    <div class="room-info">
                        <h3>üíº √áalƒ±≈üma Odasƒ±</h3>
                    </div>
                </div>

                <!-- √ñzel Oda Kartƒ± (YENƒ∞) -->
                <div class="room-card" id="btn-private" data-aos="fade-up">
                    <div class="room-img"
                        style="background-color: #2c3e50; display: flex; justify-content: center; align-items: center;">
                        <i class="fas fa-exclamation" style="font-size: 5rem; color: #e74c3c;"></i>
                    </div>
                    <div class="room-info">
                        <h3>üîí √ñzel Oda</h3>
                    </div>
                </div>

                <!-- √áalƒ±ku≈üu Odasƒ± Kartƒ± (YENƒ∞) -->
                <div class="room-card" id="btn-calikusu" data-aos="fade-up">
                    <div class="room-img"
                        style="background-image: linear-gradient(135deg, #FFB7B2 0%, #FF9AA2 100%); display: flex; justify-content: center; align-items: center;">
                        <span style="font-size: 4rem;">üê¶</span>
                    </div>
                    <div class="room-info">
                        <h3>√áalƒ±ku≈üunun D√ºnyasƒ±</h3>
                    </div>
                </div>

                <!-- ƒ∞ngilizce Odasƒ± Kartƒ± (YENƒ∞) -->
                <div class="room-card" id="btn-english" data-aos="fade-up">
                    <div class="room-img"
                        style="background-image: linear-gradient(135deg, #3498db 0%, #2980b9 100%); display: flex; justify-content: center; align-items: center;">
                        <span style="font-size: 4rem;">üá¨üáß</span>
                    </div>
                    <div class="room-info">
                        <h3>English Academy</h3>
                    </div>
                </div>
            </div>


        </div>

        <!-- ODA ƒ∞√áERƒ∞KLERƒ∞ -->
        <section id="poetry-room" class="room-section hidden">
            <!-- Arka Plan -->
            <div class="overlay"></div>

            <button class="back-btn" onclick="goBackToHall()">
                <i class="fas fa-arrow-left"></i> Hol'e D√∂n
            </button>

            <!-- U√ßu≈üan ≈ûiir ƒ∞simleri Alanƒ± -->
            <div id="floating-area">
                <!-- JS ile buraya ≈üiir ba≈ülƒ±klarƒ± eklenecek -->
            </div>

            <!-- ≈ûiir Okuma Modalƒ± (Par≈üomen) - Ba≈ülangƒ±√ßta Gizli -->
            <div id="poem-modal" class="hidden overlay-modal">
                <button class="close-modal-btn" onclick="closePoemModal()">
                    <i class="fas fa-times"></i>
                </button>
                <div class="parchment-wrapper">
                    <div class="parchment">
                        <h2 class="poem-title" id="modal-poem-title">Ba≈ülƒ±k</h2>
                        <div class="poem-body" id="modal-poem-body">
                            <!-- ≈ûiir i√ßeriƒüi buraya gelecek -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- ≈ûiir Ekleme Butonu (Sol Alt) -->
            <button id="add-poem-fab" onclick="toggleAddPoemForm()">
                <i class="fas fa-feather-alt"></i> ≈ûiir Ekle
            </button>

            <!-- ≈ûiir Ekleme Formu -->
            <div id="new-poem-form" class="hidden overlay-modal">
                <div class="form-card">
                    <h3>Yeni ≈ûiir Yaz üñãÔ∏è</h3>
                    <input type="text" id="new-poem-title" placeholder="≈ûiir Ba≈ülƒ±ƒüƒ±...">
                    <textarea id="new-poem-body" placeholder="ƒ∞√ßindeki d√∂k..."></textarea>
                    <div class="form-buttons">
                        <button onclick="saveNewPoem()" class="save-btn">Kaydet</button>
                        <button onclick="toggleAddPoemForm()" class="cancel-btn">ƒ∞ptal</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="memory-room" class="room-section hidden">
            <!-- Anƒ± Odasƒ± Arka Planƒ± -->
            <div class="overlay"></div>

            <button class="back-btn" onclick="goBackToHall()">
                <i class="fas fa-arrow-left"></i> Hol'e D√∂n
            </button>

            <h1 class="memory-title" data-aos="fade-down">Anƒ±larƒ±mƒ±z</h1>

            <!-- 3x3 Resim √áer√ßevesi Galeri -->
            <div class="frame-container" data-aos="zoom-in">
                <div class="grid-3x3">
                    <!-- 9 Adet Slot - JS ile kontrol edilecek -->
                    <div class="frame-slot" id="slot-1">
                        <img id="img-1"
                            src="https://images.unsplash.com/photo-1516961642265-531546e84af2?q=60&w=800&auto=format&fit=crop"
                            alt="Memory" loading="lazy">
                    </div>
                    <div class="frame-slot" id="slot-2">
                        <img id="img-2"
                            src="https://images.unsplash.com/photo-1529619768328-e37af76c6fe5?q=60&w=800&auto=format&fit=crop"
                            alt="Memory" loading="lazy">
                    </div>
                    <div class="frame-slot" id="slot-3">
                        <div class="empty-placeholder"><i class="fas fa-image"></i><br>Bo≈ü</div>
                        <img id="img-3" class="hidden" src="" alt="Memory">
                    </div>
                    <div class="frame-slot" id="slot-4">
                        <div class="empty-placeholder"><i class="fas fa-image"></i><br>Bo≈ü</div>
                        <img id="img-4" class="hidden" src="" alt="Memory">
                    </div>
                    <div class="frame-slot" id="slot-5">
                        <div class="empty-placeholder"><i class="fas fa-image"></i><br>Bo≈ü</div>
                        <img id="img-5" class="hidden" src="" alt="Memory">
                    </div>
                    <div class="frame-slot" id="slot-6">
                        <div class="empty-placeholder"><i class="fas fa-image"></i><br>Bo≈ü</div>
                        <img id="img-6" class="hidden" src="" alt="Memory">
                    </div>
                    <div class="frame-slot" id="slot-7">
                        <div class="empty-placeholder"><i class="fas fa-image"></i><br>Bo≈ü</div>
                        <img id="img-7" class="hidden" src="" alt="Memory">
                    </div>
                    <div class="frame-slot" id="slot-8">
                        <div class="empty-placeholder"><i class="fas fa-image"></i><br>Bo≈ü</div>
                        <img id="img-8" class="hidden" src="" alt="Memory">
                    </div>
                    <div class="frame-slot" id="slot-9">
                        <div class="empty-placeholder"><i class="fas fa-image"></i><br>Bo≈ü</div>
                        <img id="img-9" class="hidden" src="" alt="Memory">
                    </div>
                </div>
            </div>

            <!-- Yeni Anƒ± Ekleme Butonu (FAB) -->
            <button id="add-memory-btn" onclick="openAddMemoryMenu()">
                <i class="fas fa-plus"></i> Anƒ± Ekle
            </button>

            <!-- Lightbox (Resim B√ºy√ºtme) -->
            <div id="lightbox-modal" class="hidden" onclick="closeLightbox(event)">
                <button class="lightbox-close" onclick="closeLightbox(event)"><i class="fas fa-times"></i></button>
                <button class="lightbox-nav prev" onclick="changeLightboxImage(-1, event)"><i
                        class="fas fa-chevron-left"></i></button>

                <img id="lightbox-img" src="" alt="Full Memory">

                <button class="lightbox-nav next" onclick="changeLightboxImage(1, event)"><i
                        class="fas fa-chevron-right"></i></button>
            </div>

            <!-- Gizli Dosya Y√ºkleme Inputu -->
            <input type="file" id="image-upload" accept="image/*" style="display: none;">
        </section>

        <!-- BULU≈ûMA ODASI (YENƒ∞) -->
        <section id="meeting-room" class="room-section hidden">
            <div class="overlay"></div>

            <button class="back-btn" onclick="goBackToHall()">
                <i class="fas fa-arrow-left"></i> Hol'e D√∂n
            </button>

            <!-- Sohbet Alanƒ± -->
            <div class="chat-container">
                <div class="chat-header">
                    <h2>üî• ≈û√∂mine Ba≈üƒ± Sohbeti</h2>
                </div>
                <div class="chat-messages" id="chat-messages">
                    <!-- Mesajlar buraya gelecek -->
                    <div class="message system-message">
                        Bulu≈üma odasƒ±na ho≈ü geldin... ≈û√∂mine √ßok g√ºzel yanƒ±yor. üî•
                    </div>
                </div>
                <div class="chat-input-area">
                    <input type="text" id="chat-input" placeholder="Bir ≈üeyler s√∂yle...">
                    <button id="send-btn"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
            </div>
        </section>

        <!-- OYUN ODASI (YENƒ∞) -->
        <section id="game-room" class="room-section hidden">
            <div class="overlay"></div>

            <button class="back-btn" onclick="goBackToHall()">
                <i class="fas fa-arrow-left"></i> Hol'e D√∂n
            </button>

            <div class="games-menu">
                <h2 class="games-title">üéÆ Hangi Oyunu Oynamak ƒ∞stersin?</h2>
                <div class="game-buttons">
                    <button class="game-select-btn" id="btn-wheel-game">
                        <i class="fas fa-circle-notch"></i> Kader √áarkƒ±
                    </button>
                    <button class="game-select-btn" id="btn-words-game">
                        <i class="fas fa-times-circle"></i> Yasak Kelimeler
                    </button>
                    <button class="game-select-btn" id="btn-quiz-game">
                        <i class="fas fa-heart"></i> A≈ük Testi
                    </button>
                    <button class="game-select-btn" id="btn-trivia-game">
                        <i class="fas fa-brain"></i> Bilgi Yarƒ±≈ümasƒ±
                    </button>
                </div>

                <!-- SON OYNANAN OYUNLAR (PERSISTENCE CHECK) -->
                <div id="recent-scores"
                    style="margin-top: 50px; color: white; background: rgba(0,0,0,0.3); padding: 20px; border-radius: 15px; width: 90%; max-width: 500px;">
                    <!-- JS ile dolacak -->
                </div>
            </div>

            <!-- KADER √áARKI OYUNU -->
            <div class="game-container hidden" id="wheel-game-container">
                <button class="game-back-btn" id="wheel-back-btn">‚óÄ Geri</button>
                <h2 class="game-title">üé° Kader √áarkƒ±</h2>
                <div class="wheel-wrapper">
                    <canvas id="wheelCanvas" width="500" height="500"></canvas>
                    <div class="wheel-pointer"></div>
                </div>
                <button class="spin-btn" id="spin-btn">√áEVƒ∞R</button>
                <div class="wheel-result hidden" id="wheel-result"></div>
            </div>

            <!-- YASAK KELƒ∞MELER OYUNU -->
            <div class="game-container hidden" id="words-game-container">
                <button class="game-back-btn" id="words-back-btn">‚óÄ Geri</button>
                <h2 class="game-title">üö´ Yasak Kelimeler</h2>
                <p class="words-instruction">Balonlara tƒ±kla ama yasaklƒ± olanƒ± patlatma!</p>
                <div class="words-playground" id="words-playground">
                    <!-- Kelimeler buraya JS ile gelecek -->
                </div>
                <div class="words-result hidden" id="words-result"></div>
            </div>

            <!-- A≈ûK TESTƒ∞ OYUNU -->
            <div class="game-container hidden" id="quiz-game-container">
                <button class="game-back-btn" id="quiz-back-btn">‚óÄ Geri</button>
                <h2 class="game-title">‚ù§Ô∏è A≈ük Testi</h2>
                <div class="quiz-container" id="quiz-container">
                    <!-- Soru buraya gelecek -->
                </div>
            </div>

            <!-- Bƒ∞LGƒ∞ YARI≈ûMASI OYUNU (YENƒ∞) -->
            <div class="game-container hidden" id="trivia-game-container">
                <button class="game-back-btn" id="trivia-back-btn">‚óÄ Geri</button>
                <h2 class="game-title">üß† Bilgi Yarƒ±≈ümasƒ±</h2>
                <div class="quiz-container" id="trivia-container">
                    <!-- JS ile dolacak -->
                </div>
            </div>
            </div>
        </section>

        <!-- √áALI≈ûMA ODASI (YENƒ∞) -->
        <section id="working-room" class="room-section hidden">
            <div class="overlay"></div>

            <button class="back-btn" onclick="goBackToHall()">
                <i class="fas fa-arrow-left"></i> Hol'e D√∂n
            </button>

            <!-- Study Menu -->
            <div id="study-menu" class="study-menu-container" data-aos="fade-up">
                <h2 class="memory-title" style="margin-bottom: 2rem;">√áalƒ±≈üma Odasƒ± üìö</h2>
                <div class="study-options">
                    <div class="study-option-card" onclick="showFlashcards()">
                        <div class="icon-box"><i class="fas fa-layer-group"></i></div>
                        <h3>Ezber Kartlarƒ±</h3>
                        <p>Ceza Maddeleri & A√ßƒ±klamalar</p>
                    </div>
                    <div class="study-option-card" onclick="showSpeedLimits()">
                        <div class="icon-box"><i class="fas fa-tachometer-alt"></i></div>
                        <h3>Hƒ±z Limitleri</h3>
                        <p>Yasal Hƒ±z Sƒ±nƒ±rlarƒ±</p>
                    </div>
                    <div class="study-option-card" onclick="showSigns()">
                        <div class="icon-box"><i class="fas fa-map-signs"></i></div>
                        <h3>ƒ∞≈üaret Levhalarƒ±</h3>
                        <p>Trafik ƒ∞≈üaretleri ve Anlamlarƒ±</p>
                    </div>
                    <div class="study-option-card" onclick="showNotes()">
                        <div class="icon-box"><i class="fas fa-clipboard-check"></i></div>
                        <h3>Ceza Notlarƒ±</h3>
                        <p>Plaka, Madde ve Tarih Kaydƒ±</p>
                    </div>
                </div>
            </div>

            <!-- Flashcards Section -->
            <div id="flashcard-section" class="hidden study-sub-section">
                <div class="sub-header">
                    <button class="sub-back-btn" onclick="showStudyMenu()"><i class="fas fa-chevron-left"></i>
                        Geri</button>
                    <h3>Ezber Kartlarƒ±</h3>
                </div>

                <!-- Admin / Add New Card Toggle -->
                <button class="toggle-add-btn" onclick="toggleAddCardForm()">+ Yeni Kart Ekle</button>
                <div id="add-card-form" class="add-data-form hidden">
                    <input type="text" id="new-card-term" placeholder="Terim / Madde (√ñrn: Madde 51)">
                    <input type="text" id="new-card-def" placeholder="A√ßƒ±klama">
                    <button onclick="addNewFlashcard()">Kaydet</button>
                </div>

                <div class="flashcard-wrapper">
                    <div class="flashcard" onclick="flipCard()">
                        <div class="card-face card-front">
                            <div class="card-icon"><i class="fas fa-question-circle"></i></div>
                            <div class="card-content" id="card-front">Y√ºkleniyor...</div>
                            <div class="tap-hint">Cevabƒ± g√∂rmek i√ßin dokun</div>
                        </div>
                        <div class="card-face card-back">
                            <div class="card-icon"><i class="fas fa-exclamation-circle"></i></div>
                            <div class="card-content" id="card-back">Y√ºkleniyor...</div>
                        </div>
                    </div>
                </div>

                <div class="flashcard-controls">
                    <button class="control-btn" onclick="prevCard()"><i class="fas fa-arrow-left"></i></button>
                    <span id="card-counter">1 / 10</span>
                    <button class="control-btn" onclick="nextCard()"><i class="fas fa-arrow-right"></i></button>
                </div>
                <p class="swipe-hint"><i class="fas fa-hand-pointer"></i> Kaydƒ±rarak deƒüi≈ütir</p>
            </div>

            <!-- Speed Limits Section -->
            <div id="speed-limit-section" class="hidden study-sub-section">
                <div class="sub-header">
                    <button class="sub-back-btn" onclick="showStudyMenu()"><i class="fas fa-chevron-left"></i>
                        Geri</button>
                    <h3>Hƒ±z Limitleri</h3>
                </div>
                <div id="speed-limits-container" class="speed-grid">
                    <!-- JS ile dolacak -->
                </div>
            </div>

            <!-- Signs Section -->
            <div id="signs-section" class="hidden study-sub-section">
                <div class="sub-header">
                    <button class="sub-back-btn" onclick="showStudyMenu()"><i class="fas fa-chevron-left"></i>
                        Geri</button>
                    <h3>ƒ∞≈üaret Levhalarƒ±</h3>
                </div>

                <!-- Admin / Add New Sign Toggle -->
                <button class="toggle-add-btn" onclick="toggleAddSignForm()">+ Yeni Levha Ekle</button>
                <div id="add-sign-form" class="add-data-form hidden">
                    <input type="text" id="new-sign-name" placeholder="Levha Adƒ±">
                    <input type="text" id="new-sign-icon" placeholder="ƒ∞kon / Emoji (√ñrn: üõë)">
                    <input type="text" id="new-sign-desc" placeholder="A√ßƒ±klama">
                    <button onclick="addNewSign()">Kaydet</button>
                </div>

                <div id="signs-grid" class="signs-grid">
                    <!-- JS ile dolacak -->
                </div>
            </div>

            <!-- Note Taking Section (Ceza Notlarƒ±) -->
            <div id="notes-section" class="hidden study-sub-section">
                <div class="sub-header">
                    <button class="sub-back-btn" onclick="showStudyMenu()"><i class="fas fa-chevron-left"></i>
                        Geri</button>
                    <h3>Ceza Notlarƒ± üìù</h3>
                </div>

                <!-- Not Ekleme Formu -->
                <div class="note-form-card">
                    <h4>Yeni Kayƒ±t Ekle</h4>
                    <div class="note-inputs">
                        <input type="text" id="note-plate" placeholder="Ara√ß Plakasƒ± (√∂rn: 34 ABC 123)">
                        <input type="text" id="note-article" placeholder="Ceza Maddesi (√∂rn: 51/2-a)">
                        <input type="text" id="note-location" placeholder="Yer / Konum">
                        <input type="datetime-local" id="note-date">
                    </div>
                    <button class="add-note-btn" onclick="addNote()">Kaydet <i class="fas fa-save"></i></button>
                </div>

                <!-- Kayƒ±tlƒ± Notlar Listesi -->
                <div id="notes-list" class="notes-container">
                    <!-- JS ile dolacak -->
                    <p class="empty-notes">Hen√ºz kaydedilmi≈ü bir ceza notu yok.</p>
                </div>
            </div>
        </section>

        <!-- √ñZEL ODA (YENƒ∞) -->
        <section id="private-room" class="room-section hidden">
            <div class="overlay"></div>

            <button class="back-btn" onclick="goBackToHall()">
                <i class="fas fa-arrow-left"></i> Hol'e D√∂n
            </button>

            <div class="working-content">
                <i class="fas fa-user-secret" style="font-size: 5rem; color: #e74c3c; margin-bottom: 20px;"></i>
                <h1>√ñzel Oda</h1>
                <p>Buraya sadece ≈üifreyi bilenler girebilir...</p>
                <p style="margin-top: 20px; font-size: 1.2rem;">ü§´</p>
            </div>
        </section>
        <!-- √áALIKU≈ûU ODASI (YENƒ∞) -->
        <section id="calikusu-room" class="room-section hidden">
            <div class="overlay"></div>

            <button class="back-btn" onclick="goBackToHall()">
                <i class="fas fa-arrow-left"></i> Hol'e D√∂n
            </button>

            <h2 class="room-title" style="margin-bottom: 20px;"> √áalƒ±ku≈üunun D√ºnyasƒ± üê¶</h2>

            <div class="calikusu-container">
                <!-- Tab Ba≈ülƒ±klarƒ± -->
                <div class="calikusu-tabs">
                    <button class="tab-btn active" onclick="openCmTab('todo')">Yapƒ±lacaklar</button>
                    <button class="tab-btn" onclick="openCmTab('diary')">G√ºnl√ºk</button>
                </div>

                <!-- Yapƒ±lacaklar Sekmesi -->
                <div id="tab-todo" class="tab-content active">
                    <div class="input-group">
                        <input type="text" id="todo-input" placeholder="Bug√ºn ne yapmalƒ±yƒ±z?">
                        <button onclick="addTodo()" class="add-btn"><i class="fas fa-plus"></i></button>
                    </div>
                    <ul id="todo-list" class="styled-list">
                        <!-- JS ile dolacak -->
                    </ul>
                </div>

                <!-- G√ºnl√ºk Sekmesi -->
                <div id="tab-diary" class="tab-content">
                    <div class="diary-input-area">
                        <div class="date-picker-container" style="margin-bottom: 10px;">
                            <input type="date" id="diary-date-picker" class="styled-date-input">
                        </div>
                        <textarea id="diary-text" placeholder="Sevgili g√ºnl√ºk, bug√ºn..."></textarea>
                        <button onclick="saveDiaryEntry()" class="save-diary-btn">Kaydet</button>
                    </div>
                    <div id="diary-entries" class="entries-container">
                        <!-- G√ºnl√ºkler buraya -->
                    </div>
                </div>
            </div>
        </section>
        <!-- ƒ∞NGƒ∞Lƒ∞ZCE ODASI (YENƒ∞) -->
        <section id="english-room" class="room-section hidden">
            <div class="overlay"></div>

            <button class="back-btn" onclick="goBackToHall()">
                <i class="fas fa-arrow-left"></i> Hol'e D√∂n
            </button>

            <h2 class="room-title" style="margin-bottom: 20px;">English Academy üá¨üáß</h2>

            <div class="english-container">
                <!-- Ba≈ülangƒ±√ß / ƒ∞stek Ekranƒ± -->
                <div id="english-welcome" class="english-welcome">
                    <i class="fas fa-graduation-cap" style="font-size: 5rem; color: #3498db; margin-bottom: 20px;"></i>
                    <h3>Hazƒ±r mƒ±sƒ±n?</h3>
                    <p>Senin i√ßin g√ºnl√ºk 20 adet B1 seviye kelime hazƒ±rlayabilirim.</p>
                    <button onclick="startDailyEnglish()" class="start-english-btn">
                        <i class="fas fa-magic"></i> Kelime √ñƒürenmek ƒ∞stiyorum
                    </button>
                    <!-- Y√ºkleniyor G√∂stergesi -->
                    <div id="english-loading" class="hidden" style="margin-top: 20px;">
                        <i class="fas fa-spinner fa-spin" style="font-size: 2rem; color: #fff;"></i>
                        <p style="margin-top: 10px;">Sihirli kelimeler hazƒ±rlanƒ±yor...</p>
                    </div>
                </div>

                <!-- Kelime Listesi / Kart G√∂r√ºn√ºm√º -->
                <div id="english-content" class="english-content hidden">
                    <div class="english-header">
                        <span id="daily-topic-date">Bug√ºn√ºn Kelimeleri</span>
                        <div style="display: flex; gap: 15px; align-items: center;">
                            <span id="word-progress-text" style="color: #fff; font-weight: bold;">1 / 20</span>
                            <button onclick="refreshEnglishWords()" class="refresh-btn" title="Yenile"><i
                                    class="fas fa-sync-alt"></i></button>
                        </div>
                    </div>

                    <div id="single-card-container" class="single-card-container">
                        <!-- JS ile tek kart dolacak -->
                    </div>

                    <div class="card-controls" id="card-controls">
                        <button onclick="nextEnglishWord()" class="learn-btn">
                            <i class="fas fa-check"></i> √ñƒürendim (Sƒ±radaki)
                        </button>
                    </div>

                    <!-- Biti≈ü Ekranƒ± -->
                    <div id="english-completion" class="hidden" style="text-align: center; padding: 20px;">
                        <i class="fas fa-trophy" style="font-size: 4rem; color: #f1c40f; margin-bottom: 20px;"></i>
                        <h3>Tebrikler! üéâ</h3>
                        <p>Bug√ºn√ºn hedeflediƒüin 20 kelimesini tamamladƒ±n.</p>
                        <button onclick="restartDailyEnglish()" class="start-english-btn" style="margin-top: 15px;">
                            <i class="fas fa-redo"></i> Tekrar Et
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- M√úZƒ∞K ODASI (YENƒ∞ - TAM EKRAN PLAYER) -->
        <section id="music-room" class="room-section hidden"
            style="background: url('assets/img/music_bg.jpg') no-repeat center center/cover;">
            <div class="overlay" style="background: rgba(0,0,0,0.85);"></div>

            <button class="back-btn" onclick="goBackToHall()">
                <i class="fas fa-arrow-left"></i> Hol'e D√∂n
            </button>

            <!-- YOUTUBE PLAYER (Gizli ama DOM'da aktif) -->
            <div id="youtube-player-placeholder"
                style="opacity: 0; position: absolute; z-index: -1; width: 1px; height: 1px;"></div>

            <div class="music-room-container">
                <div class="current-song-view">
                    <div class="album-art-large" id="album-art-container">
                        <div class="vinyl-record" id="vinyl-record-ui">
                            <div class="vinyl-label" onclick="togglePlay()">
                                <i class="fas fa-music"></i>
                            </div>
                        </div>
                    </div>
                    <div class="song-info-large">
                        <h2 id="current-track-title">Par√ßa Se√ßiniz</h2>
                        <p id="current-track-artist">M√ºzik √áalar</p>
                    </div>

                    <div class="main-controls-large">
                        <button class="ctrl-btn-lg" onclick="playPrev()"><i class="fas fa-step-backward"></i></button>
                        <button class="play-btn-xl" id="main-play-btn" onclick="togglePlay()">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="ctrl-btn-lg" onclick="playNext()"><i class="fas fa-step-forward"></i></button>
                    </div>

                    <div class="volume-container-lg">
                        <i class="fas fa-volume-down"></i>
                        <input type="range" id="volume-slider" min="0" max="100" value="50">
                        <i class="fas fa-volume-up"></i>
                    </div>
                </div>

                <div class="playlist-view">
                    <div class="add-music-bar">
                        <input type="text" id="yt-input" placeholder="YouTube Linki...">
                        <button onclick="addYoutubeTrack()"><i class="fas fa-plus"></i></button>
                    </div>

                    <ul id="playlist" class="styled-playlist-lg">
                        <!-- JS ile dolacak -->
                    </ul>
                </div>
            </div>
        </section>

        <!-- M√úZƒ∞K OYNATICI (YENƒ∞LENMƒ∞≈û) -->
        <!-- M√úZƒ∞K OYNATICI (YENƒ∞LENMƒ∞≈û) - KALDIRILDI (YENƒ∞ ODAYA TA≈ûINIYOR) -->
        <!-- <div id="music-player-container" class="hidden">
        <div id="youtube-player-placeholder" style="display:none;"></div>
        ...
    </div> -->



        <!-- Scripts -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
        <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
        <script src="js/telegram-notifications.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
        <script src="js/supabase-client.js"></script>
        <script src="js/main.js?v=3"></script>
        <script src="js/quiz-game.js?v=3"></script>
        <script src="js/trivia-game.js?v=3"></script>
        <script src="js/study-room.js?v=3"></script>
        <script src="js/games.js?v=3"></script>

        <!-- MOBILE BOTTOM NAVIGATION -->
        <nav id="bottom-nav" class="hidden">
            <a href="#" class="nav-item active" onclick="goBackToHall(event)">
                <i class="fas fa-home"></i>
                <span>Hol</span>
            </a>
            <a href="#" class="nav-item" onclick="openDirectRoom('meeting-room', event)">
                <i class="fas fa-comments"></i>
                <span>Sohbet</span>
            </a>
            <a href="#" class="nav-item" onclick="openDirectRoom('memory-room', event)">
                <i class="fas fa-images"></i>
                <span>Anƒ±lar</span>
            </a>
            <a href="#" class="nav-item" onclick="openDirectRoom('poetry-room', event)">
                <i class="fas fa-feather-alt"></i>
                <span>≈ûiir</span>
            </a>
            <a href="#" class="nav-item" onclick="openDirectRoom('game-room', event)">
                <i class="fas fa-gamepad"></i>
                <span>Oyun</span>
            </a>
            <a href="#" class="nav-item" onclick="openDirectRoom('working-room', event)">
                <i class="fas fa-briefcase"></i>
                <span>√áalƒ±≈üma</span>
            </a>
            <a href="#" class="nav-item" onclick="openDirectRoom('english-room', event)">
                <i class="fas fa-language"></i>
                <span>ƒ∞ngilizce</span>
            </a>
            <a href="#" class="nav-item" onclick="openDirectRoom('calikusu-room', event)">
                <i class="fas fa-dove"></i>
                <span>√áalƒ±ku≈üu</span>
            </a>
            <a href="#" class="nav-item" onclick="openDirectRoom('private-room', event)">
                <i class="fas fa-lock"></i>
                <span>√ñzel</span>
            </a>
            <a href="#" class="nav-item" onclick="openDirectRoom('music-room', event)">
                <i class="fas fa-music"></i>
                <span>M√ºzik</span>
            </a>
        </nav>

        <script>
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', function () {
                    navigator.serviceWorker.register('./sw.js').then(function (registration) {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    }, function (err) {
                        console.log('ServiceWorker registration failed: ', err);
                    });
                });
            }
        </script>
</body>

</html>